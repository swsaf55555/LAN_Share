<Window x:Class="WifiDownload.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="局域网文件快速分享" Height="520" Width="820" WindowStartupLocation="CenterScreen" ResizeMode="CanMinimize">

    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="Background">
                <Setter.Value>
                    <SolidColorBrush Color="#50C9E7FF"/>
                </Setter.Value>
            </Setter>

            <Setter Property="BorderBrush" Value="#B0FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,2"/>
            <Setter Property="Cursor" Value="Hand"/>

            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="8" ShadowDepth="0" Color="#50C9E7FF"/>
                </Setter.Value>
            </Setter>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                        CornerRadius="8"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#70D8F8FF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#40A8D8FF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#D0FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#30B0C0D0"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#20FFFFFF"/>
                            </Trigger>

                        </ControlTemplate.Triggers>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Height" Value="28"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="Background" Value="#F2F2F2"/>
            <Setter Property="BorderBrush" Value="#CCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#3BA8F0"/>
                            </Trigger>

                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#1E90FF"/>
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="18">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="320" />
        </Grid.ColumnDefinitions>

        <!-- 左侧拖拽区域 -->
        <Border Grid.Column="0" CornerRadius="12" Padding="18" Background="#F5F7F9" BorderBrush="#E3E6EA" BorderThickness="1"
                AllowDrop="True" Drop="DragArea_Drop" DragEnter="DragArea_DragEnter">
            <Grid>
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="局域网文件快速分享" FontSize="20" FontWeight="SemiBold" HorizontalAlignment="Center" Foreground="#333" />
                    <TextBlock x:Name="TxtTip" Text="点击下方按钮选择你要分享的文件或文件夹" FontSize="12" Margin="0,8,0,0" HorizontalAlignment="Center" Foreground="#666" />

                    <StackPanel x:Name="StackBtn" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0" >
                        <Button x:Name="BtnSelectFile" Click="BtnSelectFile_Click" Width="140" Height="40" Margin="0,0,4,0" >选择文件</Button>
                        <Button x:Name="BtnSelectFolder" Click="BtnSelectFolder_Click" Width="140" Height="40" Margin="4,0,0,0" >选择文件夹</Button>
                    </StackPanel>

                    <TextBlock x:Name="TxtSelected" Text="未选择任何内容" Margin="0,8,0,0" HorizontalAlignment="Center" Foreground="#444" />
                    <Image x:Name="QrImage" Width="200" Height="200" Margin="0,8,0,0" Visibility="Collapsed"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 右侧控制面板 -->
        <StackPanel Grid.Column="1" Margin="18,0,0,0">
            <TextBlock Text="分享设置" FontSize="16" FontWeight="Bold" Margin="6" />

            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="6">
                <TextBlock Text="端口" VerticalAlignment="Center"  FontSize="14" FontWeight="Bold" />
                <TextBox x:Name="TxtPort"
                         Width="119"
                         Margin="6,0,0,0"
                         Text="215"
                         TextAlignment="Center"
                         VerticalContentAlignment="Center" />

                <Button x:Name="BtnStart" Click="BtnStart_Click" Width="54" Height="36" Margin="12,0,0,0">分享</Button>
                <Button x:Name="BtnStop" Click="BtnStop_Click" Width="54" Height="36" Margin="8,0,0,0" IsEnabled="False">停止</Button>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="6" VerticalAlignment="Center">
                <TextBlock Text="链接" VerticalAlignment="Center"  FontSize="14" FontWeight="Bold" />
                <TextBox x:Name="TxtUrl" Width="119" IsReadOnly="True" Margin="6,0,0,0" />
                <Button Content="复制" Click="BtnCopy_Click" Margin="12,0,0,0" Width="54" Height="36"/>
                <Button Content="扫码" Click="BtnShowQr_Click" Margin="8,0,0,0" Width="54" Height="36"/>
            </StackPanel>

            <Separator Margin="6" />

            <TextBlock Text="分享状态" FontWeight="SemiBold" Margin="6"  FontSize="16" />
            <Border Margin="6" CornerRadius="8" Background="#FFFFFF" BorderBrush="#E8EAEE" BorderThickness="1" Padding="8" Height="226">
                <ScrollViewer x:Name="TxtPreviewRoller">
                    <TextBlock x:Name="TxtPreview" Text="" TextWrapping="Wrap" Foreground="#333" />
                </ScrollViewer>
            </Border>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="6">
                <Button Content="打开分享的文件" Click="BtnOpenLocal_Click" Height="27" Width="114" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
